extends layout

block content
  .wrapper
    .container
      .row.content-middle.mx-0.px-0
        .col-12.mt-5
          .card.text-center.mt-3
            .card-header.mt-3
              h4.text-dark 휴무계 작성 리스트
            .card-body.text-dark.overflow-auto(style='max-height:60vh')
              ul.list-group.text-left
                li.list-group-item.font-weight-bold.bg-secondary.text-white
                  .row
                    .d-none.d-md-block.col-md-1 순번
                    .col-12.col-md-3 기간
                    .col-5.col-md-3 사유
                    .col-4.col-md-2 보고일시
                    .d-none.d-md-block.col-4.col-md-2 작성일
                    .col-3.col-md-1 상태
                if(list.length === 0)
                  li.list-group-item
                    .row
                      .col-12.text-center 작성된 휴무계가 없습니다
                each row, idx in list
                  - var status = row.status === 1 ? '정상':row.status === 2? '삭제요청':'삭제';
                  a(href='#', onclick='fnReadDoc("' + row._id + '")')
                    li.list-group-item.px-2(class=idx % 2 === 1 ? 'list-group-item-secondary':'')
                      .row
                        .d-none.d-md-block.col-md-1 #{idx + 1}
                        .col-12.col-md-3 #{row.application_period}
                        .col-5.col-md-3 #{row.reason}
                        .col-4.col-md-2 #{row.reportDate}
                        .d-none.d-md-block.col-4.col-md-2 #{row.closed_year}.#{row.closed_month}.#{row.closed_day}
                        .col-3.col-md-1 #{status}


  #closedModal.modal.fade(tabindex="-1", role="dialog", aria-labelledby="closedModalLabel", aria-hidden="true")
    .modal-dialog.modal-lg(role="document")
      .modal-content
        .modal-header
          h5#closedModalLabel.modal-title 휴무계 작성
          button.close(type='button', data-dismiss='modal', aria-label='Close')
            span(aria-hidden='true') x
        .modal-body
          form#formClosed
            .table.table-responsive
              table.table.text-center.table-bordered#tableClosed
                colgroup
                  col(style='background-color:#aaa;')
                  col(style='background-color:#aaa;')
                  col(width=200)
                  col(width=200)
                  col(width=200)
                tbody
                  tr
                    th.text-nowrap(rowspan=2, width='80px') 신청구분
                    th.text-nowrap(width='60px') 유급
                    td
                      .form-check.text-left.text-nowrap
                        label.form-check-label
                          input.form-check-input(type="checkbox", name='closed_type', value='annualLeave', disabled)
                          span.form-check-sign
                          | 연차
                    td
                      .form-check.text-left.text-nowrap
                        label.form-check-label
                          input.form-check-input(type="checkbox", name='closed_type', value='reserveForces', disabled)
                          span.form-check-sign
                          | 예비군/민방위훈련
                    td
                      .form-check.text-left.text-nowrap
                        label.form-check-label
                          input.form-check-input(type="checkbox", name='closed_type', value='familyEvent', disabled)
                          span.form-check-sign
                          | 경조사(취업규칙에근거)
                  tr
                    th 무급
                    td(colspan=2)
                      .form-check.text-left.text-nowrap
                        label.form-check-label
                          input.form-check-input(type="checkbox", name='closed_type', value='Absenteeism', disabled)
                          span.form-check-sign
                          | 무단결근(현장보고 및 본사에 휴가계 사후제출 시)
                    td
                      .form-check.text-left.text-nowrap
                        label.form-check-label
                          input.form-check-input(type="checkbox", name='closed_type', value='tardy', disabled)
                          span.form-check-sign
                          | 지각/조퇴
                  tr
                    th(colspan=2, rowspan=2) 신청인
                    td 부서
                    td 직급
                    td 성명
                  tr
                    td.input-td
                      input(type='text', name='department', readonly)
                    td.input-td
                      input(type='text', name='rank', readonly)
                    td.input-td
                      input(type='text', name='user_nick', readonly)
                  tr
                    th(colspan=2, rowspan=2) 신청기간
                    td.input-td(colspan=3)
                      input(type='text', name='application_period', readonly)
                  tr
                    td(colspan=3)
                      | ( &nbsp;
                      input.text-center.type_num(type='text', name='days', readonly)
                      | &nbsp; ) &nbsp; 일 간
                  tr
                    th(colspan=2) 사유
                    td.input-td(colspan=3)
                      input(type='text', name='reason', readonly)
                  tr
                    th(colspan=2, rowspan=2) 현장보고
                    td 허가자 성명
                    td 보고일시
                    td 허가자 연락처
                  tr
                    td.input-td
                      input(type='text', name='licenserName', readonly)
                    td.input-td
                      input(type='text', name='reportDate', readonly)
                    td.input-td
                      input(type='text', name='licenserTel', readonly)
            p 위와 같이 휴무계를 사용하고자 하오니 허가하여 주시기 바랍니다.
            .text-right
              input.type_num.text-center(type='text', name='closed_year', readonly)
              span 년
              input.type_num.text-center(type='text', name='closed_month', readonly)
              span 월
              input.type_num.text-center(type='text', name='closed_day', readonly)
              span 일
            br
            p.text-danger.mb-0 ※ 휴무의 당일 현장보고 및 회사보고 = 무급에 해당함.
            p.text-danger &nbsp;&nbsp;&nbsp; 단, 병가로 인한 경우 병원 진단서 또는 진료확인서 제출시에는 연차 처리 가능.
            h4 KTOP Inc. 대표이사 귀하

        .modal-footer.justify-content-center
          button.btn.btn-danger.mr-3(type="button" data-dismiss="modal") 닫기
          button.btn.btn-info(type="button", name='btnDelete', onclick='fnDeleteDoc()') 삭제요청
          input(type='hidden', name='doc_id')
block append_js
  script(src='/assets/js/custom/closed.js', type='text/javascript')
  script.
    console.log(!{JSON.stringify(list)});